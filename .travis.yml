language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - qiao.sl@gmail.com
  on_success: always
  on_failure: always
branches:
  only:
  - master
env:
  global:
  - secure: E6WqUsvNBaznI6xiaDLzBVLr7pKGqR3uGOjBXqT5m6snZnQmH7awu364aHXgE5wte7kODIbtIhWOBFUxZqdFT6UUF/sTGrBEfVbK7H4cFNconiSoY9TJU6lll4MK/KMNHKCew4WfCDCTDefCuN4fVbMmb+hKHTGYNMo5IyzYFrpqitdt1Q3uNbu0A25tyAKluZ5eTMbO5ZG76B2eX5Pvge6h3Y0qEsCY+1vP7xcSBIEJYVw+PMfvp7DDgwkj4oAPu0wEelaxLfeCUDfkPRBAnCauyKfg1Ida1/aIieBd2xVkv+Ypm0lYnoMV/xlvuoZY6so4W7Ii3SJC7LGYVDtvcDSUY8yZVhNx8Lyf0G+PdjqoJcAkR670hwpDYAw6oe7neC4nRu+P60Z9MORe7rFSVDum0N/HZgAzDIOroZg4o00lqlH9GC/2OahLPxiq3cCl8i6lRi63m2aKHr/DNaPQ3312zoHA3G8TZYS1ZvfSLIEfCAOI4Ywz5N2CrE1vXbJX4nA/q1+R5tUwNKfB/KGC9hqHzuosBA5O1lQYJcTPLOMEH3qH1deen3T4KkjAWDhxZE93ovfmXUmZz3kMtkWXr3yEwwWM6L49QMPF0Iv+/eXOWnjYexJ0YU5hljgG96mBNhiLURRg/xDI6BsJLKBEb2fNGfp8k1crTyv7dVvjYvo=
  - secure: j97NlFyjfMEA1CDh1uPXpksrp7udS57/0DTIsIXRLUNXvn203Skm9DvUqp1wNhFSfBAhSM0xE7rsWiy23goVL8z3+pxW4DQxzi9THzB+Z76/eHr6gGfboYAI7xqxxweC89y52B3h9y3E+smFRW4HZeS4LC+nw/tXo0VQh58fbE4Ydqx0JLXEJYx0PpJ1eYEfa3U0D9OlB+c4p+KJcer3ufvnAtdOPpsnjySlzzd9cg/3H2Kgt3P2Axvk7x+nFAYlE2Ov02aO8n00MhXI1R9GkImN1wl8XCcXS7gZOXeR1Xd6WPyY5wHOiOUPZe5+NnTMNLWIWm9rfY3Tj7YGvq41JoWbP348PELaqzAb4bn6zYhjR7IMZLmBroQ3ndDNk9Ugu0TOufQIXZOEQvhcdPW80T4sVhJBprxMRpji3wp2nfk5AZ6uaW1ppbeKTCbXSNGUMY8syzcuzakNOHsw19yJDJ2bRl/6VJEV7xaSKmUYFCkGBsuUeB7deQWYzV04oC2RU4ZMXaz/l0oUy02HigPfWpuHcfuxl1rKQpkgi1HysiecQpPX+qGxnPuIkhTYqRYFTnNtaEFHgnnWdaAAHqj+7BsLECTnu83PB8eIOXu1urBHxrxFgG5Ghjv8dN14GhXTiXWmNIp0C9AwLIT4KHrUPT+x5F2Dqtb07Qmlnm1/XD0=
  - secure: km8ABs12DHC1juDJ1W6W1ekvo8E1pNxyySep2rFWsB1BLWQdK6vWNUi0EqcQVibRa/WEmSlHFZCfplkzK5ON3c1UbNMnqHkh3wNArDr8AcnaI7xRwGFxVIJtPGZVfQtma06QeXyE54pggjHMF9i9gGrNxyBIduEtX9ao1NIaUudnQiDPXAxMf9S5yrQarWnUUoNaJGU6KhY703LI5P7+znRn+GQ170J+WQdxloivfKqnrVASCHMQbkxi+KBuXhxCsRHcw/NkE9oKGlbG50UdR0LpSe4YJiuBuOXzJX2NwK0b8ycvovCalmNcqivRgNxaICiQ7wCvhxkxoP1+7zdNjGdjERIOPzGiT68r2qh47D9SDHgipjwX9IGtlXwHBgWiNLcRs+NbhJeuB5enKcSXH1+MrpERVBoO/vBWVX59iXobaA9XC9YgyYOOmBHkX7Ajk/2CUA/ADqKpeAbIBW2lpUft2Ni+5bWkjDVe7DetjwSYU/Gj6FRFtU3jsMTNitSmnbK6e/5DcPc3odxwsLKUgZiXU8RahiYIkesCm042Uu+sdcJ7SvxFGF6EkJPbtMxWuLi+Nza6c+uuKSQuOOGyKTTUmQxNf+BZIchdZM5bWOr6aH2ISzoAl44Of/OlkXrZmhm1QS+OkIN8fbivkXxWhQXJE7H2jeswV5WLfpZ7dgY=
  - secure: KOnFu91uxkxVpIgztouC6pHYYQBlbkifZ6vB3THU3RVh8DN5a2Q2jKJ9lqq5eDQn8csgNktDrAEXaSjVhychCXdAZelrk6LrTESeNG3pH60/fyxFvOuuJhE3lyTVMNL1uczJk4SShsUrJWKvO60GHh+ZGLDdcO/hq3K/RuQofMsmDeSiDlL/QW6eo2uoAD7JlSUvGdyJBpA0l0kMXvdLRhDoxQMjAUUKZQBt9wHPWiajqtDTlkLTV++mDsIzqZ+a98ZERtwoSSdUxWx4A4i3/UmhBL0YpHz0zCFD+3wYJODwTanQLpv2bbNBKyvRFvdSZqtzuTN/uIsxDlHUmtLGaO8QvASbTV29tNK5XFnUG80LpyLRysJVQPQqJhX4nH6zUrMuqc7mpF1XBcTTLnzhnmEYH0MuYSOdEQKAWfgXP2PmV6/F+lNcILgHv4DcX5yha0zCGnv3sKE3F3SeSYqzCtBrcISVLKyuPkO8qMdaGAeJPtdvknLrm4nNjXbBtEyrz145UkBh5uua/CXXrheDsKZudRRVjqTtbvYZ4nojqidb1H8a/v0yPixL+i/0z/RynRQ02h+VxESzA5Tv6CZOzjvkCPjY5DYq7KOPJNtoKbrD5+23Y5+UN6/Og6C8eef6mIirY+NE5qJxPUoNfA6FCFW0W1SSJpW4mme6e+a0n9w=
  - secure: IMo6+b8kxTXhavolsJQDwWPm5rKZfadUJu6U0sG/prFWi+wzMXln5XpASiiHomzDKQ3XYp6jrn8nU66R/H2Usv2Q9U/ikLevTXY4UGGxbzCU8j/yCOSzzZyD5K6XlvhFmqZClAuVCw8CRyzXMuBbq9dmZqOg+c5axlcLXH+W6raYWsS8t/kZuzVtp4thWX/7vOToxR7wZr8zQ+w/v8khXs9rs69fIv1YDPx+I8+spheFXGDsyI2bM+ZOxMbQxNHWtpsQpde6XIfaHo6cBUgx7C8Z8dr2/x3xGrDQ7SVzGw865fuEEaGs9wYa5C212NIPAeeA2ZIoob2qK2C+CA6N2wByZ/bGWXTTF0VzNIoiVZfZZuI60Jxk4wboCM5Ivdk2jxyEIFwPDfduarGIeSnooJo6dVj2jye/l46yF6Dzkwv9ZgpkMKch7tF/eftsY/BwTM8m0nKYcVbwpT5M9bmrQZCzrJfYqLJfASsM8B0mxkFD2Owtwswdw2C4MhtvcGwvOpMn4Td/sMv+QODNnEn9/yQX4iOAqtTU3m8VhqOOHqzPN/UcjW/Ro5vcDmY232zZljUYdcYyOrphheJJ/iMwk0YlLz+rIEATNSOSb9aD4hTMtinHMXxxe5FyZiZ7Upk2vnuMogjbQ0hvEWAkXYh2DRlKwiiNyPi0+MHWF5kdb60=
  - secure: LGu9dDCtUzQ+m7gJG4Ipc9V7On8/tvPaqP5APBSEJQGBvzXEV51mKjG4TqX8d34AlFVJrNaQkYsBsMTgC7mhAKds57ARyum8y316iB4+ZHcIdKeCpvlm4YcH73CIVo2B00GKbEcespK9bVJSt9qogrIPKqD6CTwbIQAn7X9mKCATcpFjmt4e9zwclR8RJVY9I5qeG6FyXzWABBV7zRKYLovEdN7/+CalNP+Mlpih0EgWTXqMf0gvyfdQYvg37tP83Q+J1CD9P4UkgcE2gLg4VdfGtYfqHRN1bTtN3NPC8434RzRH/fkqqV+xaC8KhVkRnm2nN29ozApDTcRhifLlXvjFeEaJvq8UFXujlwdLbLfbbgU70XFGL6o2VvMySuV17fgu7UIZo4R7Y7CAUDSVZHtI7Tun66qV+ck9yar3hX4DeshNUKGdgRlcHQ8ndgZrTPAdI6LNWTeaz1UuRemdWwHqz2jzpD+ztObGFMyK5/hnh2va9HlhKexgtNqPTdK0sbGVB3WHflrJ6q0EC88lmOv79cxXLy3vLsFKv6UbmasmvAwV+WMK9eHN4mJfBwo7E3HX0uPYR7ml6RPi28VAWFzLNeW0dbJ7AM7UIdibU1Il+ghZnK0a+3vSIs9F+4tAR1Z+1bXqHBeBs1+H93yWgLXVTMFfnOJxekrHqRdx/hU=
  - secure: HWTmvD1JxGtWsE/04x5d8ymsusLH1YtpLYnf2q/RYNrqgCmSoaB/Y3arjogZR28yGzDiCxgrybMDhdyRpz5Ze9iyshT4wlVJB0xt6pgO4QbaZsd1gcTZsq5a9D6o0kcim400M0wzXGl8OBNPUPJ0tJc0yIHyUzTIwibtfRGnsxNHErO7phjbPtcZ1Hu4vpWOy5T/KDLMyyU+GlNd7BHo5gkuGx17gBBl6wr6jShHRY0BaDAvRgXZh4H+IOMcpWaLH3Sasi/3nE8FvFtaiBpm9wp01ck+N3bgD1nzmTsAUKB9vgwJSSqfNgwFyfSrhmm5orZ9NiGkNVz3roukVUY0I69zgno7QJ9w59Ii3kLdXKe3/9tt/P7Jik7fSW1iX7RWrYx2MzgZUHwzktHtB2uS4rGVJAaCGMmhyAJGnUJuSzC/jq9uX+9jtg/SrsycWSbZics/MW2r4v0whh4/wTe2oBDlW/xkfuAjmiELb+ikHKYMslHY210OtzgDtIlvcYqAkhODEvk0JLUs61+YU2zj2MT0Lm1Ww7v4usbpNL3l5PBnYpht9cHx+4lZtai3k5HeHylyiL0rNQ2BHKE+x+N0TYxt+YMTeMCkILjwijt8c7r5x6drLW/Ib4UnlY5Ary9AJs0OBASgsOCp9PC9XrkVB5ZQ2ee7kjMhkMe/sG1ZMtM=
  - secure: cU0/FTZQ/FNK2QEp/dj63chDci46h5sj0p7dduz7+FVYuIRRDmgsoZkhtel9J5u2JvLI7MBM1SEeiOB7lqUfW/FX0+0Ca71RzF6vivV/HOeoXW6YpVRlB117gHOhd/z0bWnUMb//TpWQQaIJgy1KIfn2HvjiD9k+FwGuyncQQsFrbxK3vrE7QWyHpjEMjLEmULw15tO/RNOJ96TF4qNFdCnzIYTHbMqSWXHEEUz/sz0/tfkFDY0QG7V+emoGALzD/LpmePmca89gtmGlro2x0c4+obMqadAuSco6yDvLDotdNnQbT7RAaYgFuyGpKIlU2L4/YplLzTWPyigL9plDJPwyMV2+yaOgQxqukV48fT5r8jUJior+TIiP3oU9B2kbhSb+4+pRUgTgxKmw5SxutXJqq8zOog/o09XZSMGUwnEns5m58ZTqU7oRnZMer9CWDfdt+sF1ov3xMyVKXV4/eWW9jHrYSuZsMnthr+fqQcvVCUjP3cfCqqZt5fPnyDCHOLNn0juPY7S/xeXcb+ejJB/MVguaK3aVJA6XfjhQr6nNiW9zxQreDMCyDZg+bR8i+k8jaYON5X4/Lmor4EDuZL+7FmL/WGOVkyU3zAAZWjG6R05+/uwTBb7UJDD1fnDLFPTi3qHtu8hd6ZQeR3eAKBJGPEIs07ENUTapQTMHf1A=
  - secure: R4b232IjOw0Hn0zMesKnUj4F3sKt6Ik5MMcJ1z88lAsuqqlAl3PLP1Lxa0q2Dvl8DOgfeOuZRKnsezlUin7/6c70UzK/88ogmwzats6L89/Ga1MRUL7aC20n3uSXji44h34KM2JVqclr+6E7jndd4p4Q0rXLiNn5n7EZ0gJy5Y7Gok+NMCmzDjlu3wtGzkRzog6VNRYc1GKHKodcUCyi0AmpFCV6LsThZy95olJfvoEXcXfsOHmprAxcvQeCNlcqgFsJyD8EH7lz1SS3zzyEGnKoLTEvgUfzEdPFHvTJNOBF+TcuJrgiItUznjqmJyv7+cxlwAchBdc31FnFD1iTfnYC5ECimJa7HS/41Knh/oSzaVQqWingJDcVy3nBYsDcWzZwZDDVz0a9yc9ixHUibhqyvMyTC8Ue4JocRWSQUEp3pl7hoW8ubOWLEld6n/udLBSwjkRLUfXw4z1Vm73HHhMlsUPbV/Re2kKQ+9dNvYSYZHdlakjd4V/BhXn5g4FF0scViiexM9srq5+svh62KwNiCumAHE8gUmbAR3PcaLUEgcrQ1x7yKqPsfN3PNEC74csYyoiw69MDBGJyucwTAe3mnQ63r5Bohd7yzbEFtGa43G6C6FigZD9yXgWl7DBbQmc3gUFuNJCLiTPazbTTxkI+t1XPqinxUN1VCZC2m0k=
  - secure: h4U3Zus93I11C3Kjkt47/BronHCg/GC7ErSBW8rhvne8QHi7HcREMwQLlkrkjcG15Fva/HOmqvx4bwBAPNUJHqsnCA6AM6MZy8l6YTTxfzgX6FGtVHwdI/8CeNZYPmJDfq5TGS6YAcb3pRZyt7QS2p3sF8oYVHYPSqecYUfZboJW8o/iM003ZBm5Y44gnQbEffivEduCWk3WhSKwLlhvUcVFWM+Cub/zqg4S5ZrwSkg4WdtxN/d3zQPmnu1LDWgPkM7GGYPjpymXdZ0hf2oRxtsmU3ciHPaDdRsC0GPn+Pg4jBUF1Wq/zNxKMQW65ejiZqPTmXvdBM0iwOILfywWJfx7SswD6414LMx3cxiFs0tso/J0cZWTjxOwufTX9ZBgNANUf+77s3W5+eY5giwTi1Zh19Dx+hfAoz1tdchZejWhH/PU2Xb4SQeI1HAiGAzBiShiF3sAtSsHwJUTIHfLZQuKaCpDCCdOVX4xDEFcLK64MamxpM37H+1RzXasxZ16fjQRM5plTxfAm+dc7Oa6/sd0JxY94hb5sE5lGLzUIhT6WTuhzztLfBFkEwz2ebANDGPcwZwpAKPAD9afy31xFq28XHtgAATw7BcUgg3hEmttRSOPeZKLXVYLbXdXfKKeL6OkaCvBVRLpzbUScEt1elzCFDcsKJWORflTXNWLzVA=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=chapter10-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=54.215.193.139
- export PLATFORM_TEST_NAME="chapter10-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
